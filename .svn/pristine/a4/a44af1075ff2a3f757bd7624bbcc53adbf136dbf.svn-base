@using CampusWebStore.Shared.Models
@model IEnumerable<CampusWebStore.Shared.Models.ShoppingCartModel>
@{
    ViewBag.Title = "CheckOut";
    Layout = "~/Views/Shared/_Layout.iPhone.cshtml";

    var cartTotal = 0.0;
}
<h2>
    Shopping Cart - Checkout</h2>
<script type="text/javascript">

    jQuery(document).ready(function () {

        jQuery('input[id*="chkShippingThisTime"]').click(function () {

            var status = jQuery('input[id*="chkShippingThisTime"]').is(":checked") ? "on" : "off";

            if (status == "on") {

                jQuery("#divAddress").hide();

                jQuery("#divShipping").show();

            } else {

                jQuery("#divAddress").show();

                jQuery("#divShipping").hide();
            }

        });

    });
   
</script>
<div>
    <div>
        <table>
            <tr>
                <td>
                    <h4>
                        Progress...</h4>
                    1.<a href="#">Verify Address </a>
                    <br />
                    2.<a href="#">Select Shipping Method </a>
                    <br />
                    3.<a href="#">Make Payment/Finalize Order</a><br />
                </td>
                <td>
                    <h3>
                        Verify Billing/Shipping</h3>
                    Please verify your shipping and billing address. If you need to make changes, please
                    edit your account details. If you would like to have this order shipped to a special,
                    one time only address, you can check the corresponding box below. If all this information
                    is correct, continue below.
                </td>
            </tr>
        </table>
    </div>
    <div>
        <table>
            <tr>
                <th>
                    Item
                </th>
                <th>
                    Detail
                </th>
                <th>
                    Type
                </th>
                <th>
                    Price
                </th>
                <th>
                    Qty
                </th>
                <th>
                    Ext
                </th>
            </tr>
            @foreach (var m in Model)
            {
                cartTotal = m.Total;
                
                <tr>
                    <td>@m.Title
                    </td>
                    <td>@m.Detail
                    </td>
                    <td>@m.Type
                    </td>
                    <td>@m.ActualPrice
                    </td>
                    <td>@m.Qty
                    </td>
                    <script type="text/javascript">$("#"+@m.Id).val(@m.Qty); </script>
                    <td>@m.Total
                    </td>
                </tr>
            }
            <tr>
                <td colspan="6" style="text-align: right;">@Html.ActionLink("Modify Items", "ViewCartDetail", "Home")
                </td>
            </tr>
        </table>
        <table>
            <tr>
                <td style="text-align: left;">
                    @{
                        var objUserModel = (UserModel)Session["USERINFO"];
                        
                    }
                    <div>
                        <div id="divAddress">
                            <table>
                                <tr>
                                    <td>
                                        <table id="tblBillingInfo">
                                            <tr>
                                                <td>
                                                    <b>Billing Info</b>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>@objUserModel.FirstName
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>@objUserModel.Address
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>@objUserModel.Address2
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>@objUserModel.City , @objUserModel.State @objUserModel.Zip
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    @objUserModel.Country
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                    <td>
                                        <table>
                                            <tr>
                                                <td>
                                                    <b>Shipping Info</b>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>@objUserModel.ShipToName
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>@objUserModel.ShipAddress
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>@objUserModel.ShipAddress2
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>@objUserModel.ShipCity , @objUserModel.ShipState @objUserModel.ShipZip
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>@objUserModel.ShipCountry
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                            <br />
                            @Html.ActionLink("Click here to change your address on file", "AccountDetails", "Account")
                        </div>
                        <span></span>
                        <div id="divShipping" style="display: none;">
                            <span style="font-weight: bold; font-size: 18px">Custom Shipping Address:</span>
                            <table>
                                <tr>
                                    <td>
                                        <table>
                                            <tr>
                                                <td>
                                                    Ship To Name:
                                                </td>
                                                <td>
                                                    <input type="text" id="txtShipToName" name="txtShipToName" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    Address:
                                                </td>
                                                <td>
                                                    <input type="text" id="txtShipToAddress" name="txtShipToName" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    Address2:
                                                </td>
                                                <td>
                                                    <input type="text" id="txtShipToAddress2" name="txtShipToName" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    City:
                                                </td>
                                                <td>
                                                    <input type="text" id="txtShipToCity" name="txtShipToName" />
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                    <td>
                                        <table>
                                            <tr>
                                                <td>
                                                    State:
                                                </td>
                                                <td>
                                                    <input type="text" id="txtState" name="txtState" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    Zip:
                                                </td>
                                                <td>
                                                    <input type="text" id="txtZip" name="txtZip" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    Country:
                                                </td>
                                                <td>
                                                    <input type="text" id="txtCountry" name="txtCountry" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    Ship Instructions:
                                                </td>
                                                <td>
                                                    <input type="text" id="txtShipInstructions" name="txtShipInstructions" />
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <input type="checkbox" id="chkShippingThisTime" name="chkShippingThisTime" /><label
                                                                                                         for="chkShippingThisTime">Check to use a 'this time only' shipping address</label>
                    </div>
                </td>
                <td style="vertical-align:top;">
                    <!-- cart info box -->
                    <table  cellpadding="0" cellspacing="5" border="0">
                        <tr>
                            <td class="textalignleft">
                                <b>Cart Total:</b> 
                            </td>
                            <td class="textalignright">
                                @cartTotal.ToString("C")
                            </td>
                        </tr>
                        <tr>
                            <td class="textalignleft">
                                <b>Shipping:</b> 
                            </td>
                            <td class="textalignright">
                                N/A
                            </td>
                        </tr>
                        <tr>
                            <td class="textalignleft">
                                <b>Tax:</b> 
                            </td>
                            <td class="textalignright">
                                N/A
                            </td>
                        </tr>
                        <tr>
                            <td class="textalignleft">
                                <b>Subtotal:</b> 
                            </td>
                            <td class="textalignright">
                                N/A
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        <table>
            <tr>
                <td>
                    <div id="divCheckOutButton">
                        <div id="divContinueShopping"> 
                            
                        </div>
                         <div id="divGoToShipping"> 
                            
                        </div>
                    </div>
                </td>

            </tr>

        </table>
    </div>
</div>
