@using CampusWebSotre.Models
@model CustomerViewModel
@{
    ViewBag.Title = "ManageCustomer";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script type="text/javascript">
   
    $(document).ready(function () {

        $("#btnSearch").click(function () {
            $("#processing").html('<img src="@Url.Content("~/Content/images/mobile/loading_normal_up.gif")">Please Wait...<br>');
            var isError = false;

            var searchText = $("#txtCustomerSearch").val();
            if (searchText) {
                if (searchText.length < 2) {
                    $("#errMsg").html("Please enter alteast two charactor.");
                    isError = true;
                }
                else {
                    $("#errMsg").html("");
                }
            } else {
                isError = true;
                $("#errMsg").html("required.");
            }
            
            if (!isError) {

                $.ajax({

                    type: "POST",

                    url: '@Url.Action("JsonGetCustomerList", "Admin")',

                    data: { SearchText: searchText },

                    success: function (data, status, xhr) {
                        $("#customerList").html(data);
                        $("#processing").html("");
                    }
                });
            }
        });


    });

    //Function to get the customer detail by id
    function GetCustomerDetail(custId) {
        $("#processing").html('<img src="@Url.Content("~/Content/images/mobile/loading_normal_up.gif")">Please Wait...<br>');
        $.ajax({

            type: "POST",

            url: '@Url.Action("JsonGetCustomerDetail", "Admin")',

            data: { CustomerId: custId },
         
            success: function (data, status, xhr) {
                $("#customerDetail").html(data);
                $("#customerList").hide();
                $("#processing").html("");
            }
        });

    }

   
    //Function to get the customer detail by id
    function ShowCustomerOrderDetail(customerId, orderId) {
        $("#processing").html('<img src="@Url.Content("~/Content/images/mobile/loading_normal_up.gif")">Please Wait...<br>');
        $.ajax({

            type: "POST",

            url: '@Url.Action("JsonGetCustomerOrderDetail", "Admin")',

            data: { CustomerId: customerId,OrderId:orderId },

            success: function (data, status, xhr) {
                $("#customerOrderDetail").html(data);
                $("#processing").html("");
            }
        });

    }
    

</script>
<span id="errMsg" style="color:red;"></span><br />
@Html.TextBox("txtCustomerSearch")<span id="processing"></span>
<input type="button" id="btnSearch" title="Find customer" value="Find customer" />
<br/>
<div id="customerList">

</div>

<div id="customerDetail">

</div>



